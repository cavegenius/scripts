<?php

// Use four arguments php ftpcleanspam.php ftp_server ftp_username ftp_password startingDirectory

// Fill in the connection settings
$ftp_server = $argv[1];
$ftp_user_name= $argv[2];
$ftp_user_pass = $argv[3];
if(isset($argv[4])) {
        $startingDirectory = $argv[4];
} else {
        $startingDirectory = '';
}



// set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
ftp_pasv($conn_id, true);
$directories = array($startingDirectory);

function getDirectories($conn_id, $directory) {
        global $directories;
        $rawlist = ftp_rawlist($conn_id, $directory);
        foreach ($rawlist as $rawfiles) {
                $folder = preg_split('/[\s]+/', $rawfiles);
                if (preg_match('/^drw/',$folder[0]) && !preg_match('/^\.\.?$/', $folder[8]) && !array_search($folder[8], $directories)) {
                        $directories[] = $directory . '/' . $folder[8];
                        $next = $folder[8];
                        $isDirectory = True;
                } else {
                        $isDirectory = False;
                }
                if ($isDirectory == True) {
                        echo "Scanning Directory: ".$directory.'/'.$next."\n";
                        getDirectories($conn_id, $directory . '/' . $next);
                }
        }
}

$rawlist = ftp_rawlist($conn_id, $startingDirectory);
//var_dump($rawlist);
$matched = array();
getDirectories($conn_id, $startingDirectory);
/*foreach ($rawlist as $rawfiles) {
       getDirectories($conn_id, $rawfiles);
}*/

//var_dump($directories);

$patterns = array('.*sneakers[-_].*.html','.*rayban[-_].*.html','jimmychoo[-_].*.html','.*seiko[-_].*.html','.*whitehouse[-_].*.html','.*rolex[-_].*.html','.*nike[-_].*.html','.*chinese[-_].*.html','.*watches[-_].*.html','.*hermes[-_].*.html','.*tiffany[-_].*.html','.*tokai[-_].*.html', '.*tom-jerry[-_].*.html','.*viagra[-_].*.html','.*armani[-_].*.html','.*asos[-_].*.html','.*louis-vuitton[-_].*.html','.*louboutin[-_].*.html','.*gagamirano[-_].*.html','.*dyno-thane[-_].*.html','drmartin[-_].*.html','.*afri-beads[-_].*.html','.*afends[-_].*.html','adieu-tristesse[-_].*.html','.*levis[-_].*.html','.*rolex[-_].*.html','monte-blanc[-_].*.html','.*abercrombie[-_].*.html','.*tires[-_].*.html','.*newbalance[-_].*.html','.*bicycle[-_].*.html','.*asics[-_].*.html', '.*bag[-_].*.html','.*annasui[-_].*.html','.*cartier[-_].*.html','.*viagra[-_].*.html','.*ativan[-_].*.html','.*necklace[-_].*.html','.*chloe[-_].*.html','.*adidas[-_].*.html','.*watch[-_].*.html','.*celine[-_].*.html','.*purse[-_].*.html','.*shoes[-_].*.html','.*jordans[-_].*.html', '.*gucci[-_].*.html', '.*chanel[-_].*.html', '.*coach[-_].*.html', '.*beats[-_].*.html','.*tetqwqsad.*','.*-\d{2}\w{2}\d{2}\.html','.*-\d{3}.html','.*-\d{1}\w{1}\d{1}\.html','.*-\w{1}\d{1}\w{1}\.html','.*-\w{1}\w{1}\d{1}\.html','\d{12}.html','.*_\d{2}\w{2}\d{2}\.html','.*_\d{3}.html','.*_\d{1}\w{1}\d{1}\.html','.*_\w{1}\d{1}\w{1}\.html','.*_\w{1}\w{1}\d{1}\.html','.*watch[-_].*.html','.*casio[-_].*.html','.*citizen[-_].*.html','.*fujifilm[-_].*.html','dr.martens[-_].*.html','gagamilano[-_].*.html','katespade[-_].*.html','marc-jacobs[-_].*.html','montblanc[-_].*.html','ralph-lauren[-_].*.html','reebok[-_].*.html','earphone[-_].*.html','sneaker[-_].*.html','wedding[-_].*.html','waterman[-_].*.html','sunglasses[-_].*.html','vonzipper[-_].*.html','victoria-secret[-_].*.html','vans-slip[-_].*.html','abis[-_].*.html','acadimox[-_].*.html','acesistem[-_].*.html','acetalgin[-_].*.html','acetamol[-_].*.html','aciclin[-_].*.html','acivir[-_].*.html','acquisto[-_].*.html','activelle[-_].*.html','actualene[-_].*.html', 'adcirca[-_].*.html','adepril[-_].*.html','adolef[-_].*.html','adronat[-_].*.html','pharmacie[-_].*.html','abacavir[-_].*.html','abana[-_].*.html','abilify[-_].*.html','acai berry[-_].*.html','acarbose[-_].*.html','accupril[-_].*.html','accutane[-_].*.html','aceon[-_].*.html','acetazolamide[-_].*.html','aciclovir[-_].*.html','acillin[-_].*.html','aciphex[-_].*.html','acticin[-_].*.html','actigall[-_].*.html','actonel[-_].*.html','actoplus met[-_].*.html','actos[-_].*.html','acyclovir[-_].*.html','adalat[-_].*.html','adapalene[-_].*.html','advair[-_].*.html','aerovent[-_].*.html','aggrenox[-_].*.html','alavert[-_].*.html','albendazole[-_].*.html','albenza[-_].*.html','albuterol[-_].*.html','aldactone[-_].*.html','aldara[-_].*.html','alendronate[-_].*.html','alesse[-_].*.html','aleve[-_].*.html','alfacalcidol[-_].*.html','alfacip[-_].*.html','alfuzosin[-_].*.html','allegra[-_].*.html','allopurinol[-_].*.html','altace[-_].*.html','amantadine[-_].*.html','amaryl[-_].*.html','amiloride[-_].*.html','amiodarone[-_].*.html','amitriptyline[-_].*.html','amlodipine[-_].*.html','amoxapine[-_].*.html','amoxicillin[-_].*.html','amoxil[-_].*.html','ampicillin[-_].*.html','anacin[-_].*.html','anafranil[-_].*.html','anaprox[-_].*.html','anastrozole[-_].*.html','ansaid[-_].*.html','antabuse[-_].*.html','antivert[-_].*.html','apcalis[-_].*.html','aralen[-_].*.html','arava[-_].*.html','arcoxia[-_].*.html','aricept[-_].*.html','arimidex[-_].*.html','aripiprazole[-_].*.html','aristocort[-_].*.html','arjuna[-_].*.html','arpamyl[-_].*.html','artane[-_].*.html','asacol[-_].*.html','ascorbic[-_].*.html','asendin[-_].*.html','ashwafera[-_].*.html','ashwagandha[-_].*.html','asiprin[-_].*.html','assuarans[-_].*.html','astelin[-_].*.html','atacand[-_].*.html','atarax[-_].*.html','atenolol[-_].*.html','atomoxetine[-_].*.html','atorvastatin[-_].*.html','atrovent[-_].*.html','augmentin[-_].*.html','avalide[-_].*.html','avana[-_].*.html','avanafil[-_].*.html','avapro[-_].*.html','avelox[-_].*.html','aventyl[-_].*.html','avodart[-_].*.html','aygestin[-_].*.html','ayurslim[-_].*.html','azathioprine[-_].*.html','azelaic[-_].*.html','azelastine[-_].*.html','azelex[-_].*.html','azithromycin[-_].*.html','azulfidine[-_].*.html','baclofen[-_].*.html','bactrim[-_].*.html','bactroban[-_].*.html','beloc[-_].*.html','benadryl[-_].*.html','benazepril[-_].*.html','benemid[-_].*.html','benicar[-_].*.html','benzac[-_].*.html','benzoyl[-_].*.html','betagan[-_].*.html','betamethasone[-_].*.html','betapace[-_].*.html','betnovate[-_].*.html','biaxin[-_].*.html','bicalutamide[-_].*.html','bimatoprost[-_].*.html','bisacodyl[-_].*.html','bisoprolol[-_].*.html','boniva[-_].*.html','brafix[-_].*.html','brahmi[-_].*.html','bromocriptine[-_].*.html','budesonide[-_].*.html','bupron[-_].*.html','bupropion[-_].*.html','buspar[-_].*.html','buspirone[-_].*.html','butenafine[-_].*.html','bystolic[-_].*.html','cabergoline[-_].*.html','calan[-_].*.html','calcitriol[-_].*.html','candesartan[-_].*.html','capecitabine[-_].*.html','capoten[-_].*.html','captopril[-_].*.html','carafate[-_].*.html','carbamazepine[-_].*.html','carbidopa[-_].*.html','cardarone[-_].*.html','cardizem[-_].*.html','cardura[-_].*.html','cartia[-_].*.html','carvedilol[-_].*.html','casodex[-_].*.html','cataflam[-_].*.html','catapres[-_].*.html','caverta[-_].*.html','ceclor[-_].*.html','cefaclor[-_].*.html','cefadroxil[-_].*.html','cefdinir[-_].*.html','cefixime[-_].*.html','cefpodoxime[-_].*.html','ceftin[-_].*.html','cefuroxime[-_].*.html','celebrex[-_].*.html','celecoxib[-_].*.html','celexa[-_].*.html','cellcept[-_].*.html','cephalexin[-_].*.html','cetirizine[-_].*.html','champix[-_].*.html','chlorambucil[-_].*.html','chloramphenicol[-_].*.html','chloromycetin[-_].*.html','chloroquine[-_].*.html','chlorpromazine[-_].*.html','chlorthalidone[-_].*.html','chlorzoxazone[-_].*.html','cialis[-_].*.html','cilostazol[-_].*.html','ciloxan[-_].*.html','cipro[-_].*.html','ciprofloxacin[-_].*.html','citalopram[-_].*.html','clarinex[-_].*.html','clarithromycin[-_].*.html','claritin[-_].*.html','clavulanate[-_].*.html','cleocin[-_].*.html','clindamycin[-_].*.html','clobetasol[-_].*.html','clofazimine[-_].*.html','clomid[-_].*.html','clomiphene[-_].*.html','clomipramine[-_].*.html','clonidine[-_].*.html','clopidogrel[-_].*.html','clotrimazole[-_].*.html','cloxacillin[-_].*.html','clozapine[-_].*.html','clozaril[-_].*.html','colchicine[-_].*.html','colcrys[-_].*.html','colofac[-_].*.html','colospa[-_].*.html','combipres[-_].*.html','combivent[-_].*.html','combivir[-_].*.html','compazine[-_].*.html','confido[-_].*.html','copegus[-_].*.html','cordarone[-_].*.html','coreg[-_].*.html','coumadin[-_].*.html','coversyl[-_].*.html','cozaar[-_].*.html','crestor[-_].*.html','crixivan[-_].*.html','crotamiton[-_].*.html','cyclogyl[-_].*.html','cyclopentolate[-_].*.html','cyclophosphamide[-_].*.html','cycloserine[-_].*.html','cyclosporine[-_].*.html','cycrin[-_].*.html','cyklokapron[-_].*.html','cymbalta[-_].*.html','cyproheptadine[-_].*.html','cystone[-_].*.html','cytotec[-_].*.html','cytoxan[-_].*.html','danazol[-_].*.html','danocrine[-_].*.html','dapoxetine[-_].*.html','dapsone[-_].*.html','ddavp[-_].*.html','decadron[-_].*.html','deltasone[-_].*.html','demadex[-_].*.html','depakote[-_].*.html','desloratadine[-_].*.html','desmopressin[-_].*.html','desogen[-_].*.html','desogestrel[-_].*.html','desyrel[-_].*.html','detrol[-_].*.html','dexamethason[-_].*.html','dexamethasone[-_].*.html','dexone[-_].*.html','diabecon[-_].*.html','diaminodiphenyl[-_].*.html','diamox[-_].*.html','diclofenac[-_].*.html','differin[-_].*.html','diflucan[-_].*.html','digoxin[-_].*.html','dilantin[-_].*.html','diltiazem[-_].*.html','dimenhydrinate[-_].*.html','diovan[-_].*.html','diphenhydramine[-_].*.html','diprolene[-_].*.html','dipyridamole[-_].*.html','disulfiram[-_].*.html','ditropan[-_].*.html','divalproex[-_].*.html','domperidone[-_].*.html','donepezil[-_].*.html','dostinex[-_].*.html','doxazosin[-_].*.html','doxepin[-_].*.html','doxycycline[-_].*.html','dramamine[-_].*.html','drospirenone[-_].*.html','droxia[-_].*.html','dulcolax[-_].*.html','duloxetine[-_].*.html','duphaston[-_].*.html','duricef[-_].*.html','dutasteride[-_].*.html','dydrogesterone[-_].*.html','efavirenz[-_].*.html','effexor[-_].*.html','elavil[-_].*.html','eldepryl[-_].*.html','elimite[-_].*.html','elocon[-_].*.html','emsam[-_].*.html','enalapril[-_].*.html','endep[-_].*.html','entocort[-_].*.html','epivir[-_].*.html','erectalis[-_].*.html','eriacta[-_].*.html','erythromycin[-_].*.html','escitalopram[-_].*.html','esidrix[-_].*.html','eskalith[-_].*.html','esomeprazole[-_].*.html','estrace[-_].*.html','estradiol[-_].*.html','ethambutol[-_].*.html','ethionamide[-_].*.html','etodolac[-_].*.html','etoposide[-_].*.html','etoricoxib[-_].*.html','eulexin[-_].*.html','eurax[-_].*.html','evecare[-_].*.html','evista[-_].*.html','exelon[-_].*.html','ezetimibe[-_].*.html','famciclovir[-_].*.html','famotidine[-_].*.html','famvir[-_].*.html','feldene[-_].*.html','felodipine[-_].*.html','femara[-_].*.html','femcare[-_].*.html','fenofibrate[-_].*.html','fexofenadine[-_].*.html','finasteride[-_].*.html','fincar[-_].*.html','finpecia[-_].*.html','flagyl[-_].*.html','flavoxate[-_].*.html','flomax[-_].*.html','flonase[-_].*.html','flovent[-_].*.html','floxin[-_].*.html','fluconazole[-_].*.html','fludac[-_].*.html','fluorometholone[-_].*.html','flurbiprofen[-_].*.html','flutamide[-_].*.html','fluticasone[-_].*.html','fluvoxamine[-_].*.html','forzest[-_].*.html','fosamax[-_].*.html','frumil[-_].*.html','fulvicin[-_].*.html','furacin[-_].*.html','furadantin[-_].*.html','furazolidone[-_].*.html','furosemide[-_].*.html','furoxone[-_].*.html','gabapentin[-_].*.html','galantamine[-_].*.html','gasex[-_].*.html','gemfibrozil[-_].*.html','geodon[-_].*.html','geriforte[-_].*.html','gestanin[-_].*.html','glimepiride[-_].*.html','glipizide[-_].*.html','glucophage[-_].*.html','glucotrol[-_].*.html','glucovance[-_].*.html','glyburide[-_].*.html','glycomet[-_].*.html','granisetron[-_].*.html','gresiofulvin[-_].*.html','grifulvin[-_].*.html','grisactin[-_].*.html','griseofulvin[-_].*.html','gyne-lotrimin[-_].*.html','hard on[-_].*.html','herbolax[-_].*.html','himcolin[-_].*.html','himplasia[-_].*.html','hoodia[-_].*.html','horny goat weed[-_].*.html','hydrea[-_].*.html','hydrochlorothiazide[-_].*.html','hydroxyurea[-_].*.html','hydroxyzine[-_].*.html','hytrin[-_].*.html','hyzaar[-_].*.html','ibandronae[-_].*.html','ibuprofen[-_].*.html','ilosone[-_].*.html','imdur[-_].*.html','imipramine[-_].*.html','imiquimod[-_].*.html','imitrex[-_].*.html','imodium[-_].*.html','imuran[-_].*.html','indapamide[-_].*.html','inderal[-_].*.html','indinavir[-_].*.html','indocin[-_].*.html','indomethacin[-_].*.html','innopran[-_].*.html','intagra[-_].*.html','ipratropium[-_].*.html','irbesartan[-_].*.html','isoptin[-_].*.html','isordil[-_].*.html','isosorbide[-_].*.html','isotretinoin[-_].*.html','itraconazole[-_].*.html','ivermectin[-_].*.html','kamagra[-_].*.html','karela[-_].*.html','keflex[-_].*.html','keftab[-_].*.html','kemadrin[-_].*.html','ketoconazole[-_].*.html','ketotifen[-_].*.html','kytril[-_].*.html','labetalol[-_].*.html','lamictal[-_].*.html','lamisil[-_].*.html','lamivudine[-_].*.html','lamotrigine[-_].*.html','lamprene[-_].*.html','lanoxin[-_].*.html','lansoprazole[-_].*.html','lariam[-_].*.html','lasix[-_].*.html','lasuna[-_].*.html','latanoprost[-_].*.html','leflunomide[-_].*.html','letrozole[-_].*.html','leukeran[-_].*.html','levaquin[-_].*.html','levitra[-_].*.html','levlen[-_].*.html','levobunolol[-_].*.html','levodopa[-_].*.html','levofloxacin[-_].*.html','levonorgestrel[-_].*.html','levothroid[-_].*.html','levothyroxine[-_].*.html','lexapro[-_].*.html','lidocaine[-_].*.html','lincocin[-_].*.html','lincomycin[-_].*.html','linezolid[-_].*.html','lioresal[-_].*.html','lipitor[-_].*.html','lisinopril[-_].*.html','lithium[-_].*.html','lithobid[-_].*.html','liv.52[-_].*.html','lomefloxacin[-_].*.html','loperamide[-_].*.html','lopid[-_].*.html','lopressor[-_].*.html','loratadine[-_].*.html','losartan[-_].*.html','lotemax[-_].*.html','lotensin[-_].*.html','loteprednol[-_].*.html','lotrel[-_].*.html','lotrisone[-_].*.html','lovastatin[-_].*.html','loxapine[-_].*.html','loxitane[-_].*.html','lozol[-_].*.html','lukol[-_].*.html','luvox[-_].*.html','lynoral[-_].*.html','lysexl[-_].*.html','macrobid[-_].*.html','malegra[-_].*.html','manxxx[-_].*.html','maxalt[-_].*.html','maxaquin[-_].*.html','maxolon[-_].*.html','mebendazole[-_].*.html','mebeverine[-_].*.html','meclizine[-_].*.html','medrol[-_].*.html','medroxyprogesterone[-_].*.html','mefenamic[-_].*.html','mefloquine[-_].*.html','megalis[-_].*.html','mellaril[-_].*.html','meloxicam[-_].*.html','menosan[-_].*.html','mentat[-_].*.html','mentax[-_].*.html','mesalamine[-_].*.html','mestinon[-_].*.html','metaglip[-_].*.html','metaxalone[-_].*.html','metformin[-_].*.html','methocarbamol[-_].*.html','methotrexate[-_].*.html','methoxsalen[-_].*.html','methylcobalamin[-_].*.html','methylprednisolone[-_].*.html','metoclopramide[-_].*.html','metoprolol[-_].*.html','metronidazole[-_].*.html','mevacor[-_].*.html','micardis[-_].*.html','micronase[-_].*.html','microzide[-_].*.html','minipress[-_].*.html','minocin[-_].*.html','minocycline[-_].*.html','minomycin[-_].*.html','minoxidil[-_].*.html','mircette[-_].*.html','mirtazapine[-_].*.html','misoprostol[-_].*.html','mobic[-_].*.html','moduretic[-_].*.html','mofetil[-_].*.html','mometasone[-_].*.html','monoket[-_].*.html','montelukast[-_].*.html','motilium[-_].*.html','motrin[-_].*.html','moxifloxacin[-_].*.html','mupirocin[-_].*.html','mxman[-_].*.html','myambutol[-_].*.html','mycophenolate[-_].*.html','mysoline[-_].*.html','nabumetone[-_].*.html','nalidixic[-_].*.html','naltrexone[-_].*.html','naprelan[-_].*.html','naprosyn[-_].*.html','naproxen[-_].*.html','nateglinide[-_].*.html','nebivolol[-_].*.html','neggram[-_].*.html','nelfinavir[-_].*.html','neoral[-_].*.html','neurontin[-_].*.html','nevirapine[-_].*.html','nexium[-_].*.html','nifedipine[-_].*.html','nimodipine[-_].*.html','nimotop[-_].*.html','nitrofurantoin[-_].*.html','nitrofurazone[-_].*.html','nizoral[-_].*.html','nolvadex[-_].*.html','nootropil[-_].*.html','norethindrone[-_].*.html','norfloxacin[-_].*.html','norgestimate[-_].*.html','norgestrel[-_].*.html','norlutate[-_].*.html','noroxin[-_].*.html','nortriptyline[-_].*.html','norvasc[-_].*.html','norvir[-_].*.html','ocuflox[-_].*.html','ofloxacin[-_].*.html','olanzapine[-_].*.html','olmesartan[-_].*.html','omeprazole[-_].*.html','omnicef[-_].*.html','ondansetron[-_].*.html','ophthacare[-_].*.html','optivar[-_].*.html','orlistat[-_].*.html','ortho tri-cyclen[-_].*.html','ovral[-_].*.html','oxcarbazepine[-_].*.html','oxsoralen[-_].*.html','oxybutynin[-_].*.html','oxytetracycline[-_].*.html','oxytrol[-_].*.html','pamelor[-_].*.html','panadol[-_].*.html','pantoprazole[-_].*.html','paracetamol[-_].*.html','parafon[-_].*.html','parlodel[-_].*.html','paroxetine[-_].*.html','paxil[-_].*.html','penegra[-_].*.html','penisole[-_].*.html','pentasa[-_].*.html','pentoxifylline[-_].*.html','pepcid[-_].*.html','periactin[-_].*.html','perindopril[-_].*.html','permethrin[-_].*.html','persantine[-_].*.html','phenamax[-_].*.html','phenazopyridine[-_].*.html','phenergan[-_].*.html','phenytoin[-_].*.html','phoslo[-_].*.html','pilagan[-_].*.html','pilex[-_].*.html','pilocarpine[-_].*.html','pioglitazone[-_].*.html','piracetam[-_].*.html','piroxicam[-_].*.html','plan b[-_].*.html','plavix[-_].*.html','plendil[-_].*.html','pletal[-_].*.html','ponstel[-_].*.html','prandin[-_].*.html','prazosin[-_].*.html','precose[-_].*.html','prednisolone[-_].*.html','prednisone[-_].*.html','premarin[-_].*.html','prevacid[-_].*.html','priligy[-_].*.html','prilosec[-_].*.html','primidone[-_].*.html','principen[-_].*.html','prinivil[-_].*.html','probenecid[-_].*.html','procalisx[-_].*.html','procardia[-_].*.html','prochlorperazine[-_].*.html','procyclidine[-_].*.html','progesterone[-_].*.html','progestogen[-_].*.html','prograf[-_].*.html','promethazine[-_].*.html','prometrium[-_].*.html','propafenone[-_].*.html','propecia[-_].*.html','propranolol[-_].*.html','proscar[-_].*.html','protonix[-_].*.html','proventil[-_].*.html','provera[-_].*.html','provigrax[-_].*.html','pulmicort[-_].*.html','purim[-_].*.html','pyridium[-_].*.html','pyridostigmine[-_].*.html','quetiapine[-_].*.html','quibron[-_].*.html','quinapril[-_].*.html','rabeprazole[-_].*.html','raloxifene[-_].*.html','ramipril[-_].*.html','ranitidine[-_].*.html','rebetol[-_].*.html','red viagra[-_].*.html','reglan[-_].*.html','relafen[-_].*.html','remeron[-_].*.html','reminyl[-_].*.html','renagel[-_].*.html','renova[-_].*.html','reosto[-_].*.html','repaglinide[-_].*.html','requip[-_].*.html','residronate[-_].*.html','retin-a[-_].*.html','retrovir[-_].*.html','revatio[-_].*.html','revia[-_].*.html','rheumatrex[-_].*.html','rhinocort[-_].*.html','ribavirin[-_].*.html','risnia[-_].*.html','risperdal[-_].*.html','risperidone[-_].*.html','ritonavir[-_].*.html','rivastigmine[-_].*.html','rizatriptan[-_].*.html','robaxin[-_].*.html','rocaltrol[-_].*.html','rogaine[-_].*.html','ropinirole[-_].*.html','rosuvastatin[-_].*.html','roxithromycin[-_].*.html','rulide[-_].*.html','rumalaya[-_].*.html','rythmol[-_].*.html','salbutamol[-_].*.html','salmeterol[-_].*.html','selegiline[-_].*.html','septilin[-_].*.html','serevent[-_].*.html','seromycin[-_].*.html','serophene[-_].*.html','seroquel[-_].*.html','sevelamer[-_].*.html','shallaki[-_].*.html','shuddha guggulu[-_].*.html','silagra[-_].*.html','sildalis[-_].*.html','sildenafil[-_].*.html','silvitra[-_].*.html','simvastatin[-_].*.html','sinemet[-_].*.html','sinequan[-_].*.html','singulair[-_].*.html','skelaxin[-_].*.html','sleepwell[-_].*.html','slimfast[-_].*.html','smok-ox[-_].*.html','sotalol[-_].*.html','sparfloxacin[-_].*.html','speman[-_].*.html','spironolactone[-_].*.html','sporanox[-_].*.html','starlix[-_].*.html','stavudine[-_].*.html','stendra[-_].*.html','strattera[-_].*.html','stromectol[-_].*.html','styplon[-_].*.html','sucralfate[-_].*.html','suhagra[-_].*.html','sulfasalazine[-_].*.html','sumatriptan[-_].*.html','suminat[-_].*.html','sumycin[-_].*.html','avana[-_].*.html','suprax[-_].*.html','sustiva[-_].*.html','symmetrel[-_].*.html','synthroid[-_].*.html','tacrolimus[-_].*.html','tadacip[-_].*.html','tadalafil[-_].*.html','tadalis[-_].*.html','tadapox[-_].*.html','tadora[-_].*.html','tamoxifen[-_].*.html','tamsulosin[-_].*.html','tegaserod[-_].*.html','tegopen[-_].*.html','tegretol[-_].*.html','telmisartan[-_].*.html','temovate[-_].*.html','tenoretic[-_].*.html','tenormin[-_].*.html','tentex[-_].*.html','tentex royal[-_].*.html','terazosin[-_].*.html','terbinafine[-_].*.html','terramycin[-_].*.html','tetracycline[-_].*.html','theo-24[-_].*.html','theophylline[-_].*.html','thioridazine[-_].*.html','thorazine[-_].*.html','ticlid[-_].*.html','ticlopidine[-_].*.html','timolol[-_].*.html','timoptic[-_].*.html','tinidazole[-_].*.html','tiotropium[-_].*.html','tiova[-_].*.html','tizanidine[-_].*.html','tofranil[-_].*.html','tolterodine[-_].*.html','topamax[-_].*.html','topiramate[-_].*.html','toprol[-_].*.html','torsemide[-_].*.html','trandate[-_].*.html','tranexamic[-_].*.html','trazodone[-_].*.html','trecator[-_].*.html','trental[-_].*.html','tretinoin[-_].*.html','triamcinolone[-_].*.html','tricor[-_].*.html','trihexyphenidyl[-_].*.html','trileptal[-_].*.html','trimethoprim[-_].*.html','trimox[-_].*.html','triphala[-_].*.html','tritace[-_].*.html','tulasi[-_].*.html','uniphyl[-_].*.html','urispas[-_].*.html','uroxatral[-_].*.html','ursodeoxycholic[-_].*.html','ursodiol[-_].*.html','valacyclovir[-_].*.html','valparin[-_].*.html','valproic[-_].*.html','valsartan[-_].*.html','valtrex[-_].*.html','vantin[-_].*.html','vardenafil[-_].*.html','varenicline[-_].*.html','vaseretic[-_].*.html','vasotec[-_].*.html','venlafaxine[-_].*.html','venlor[-_].*.html','ventolin[-_].*.html','vepesid[-_].*.html','verampil[-_].*.html','verapamil[-_].*.html','vermox[-_].*.html','viagra[-_].*.html','viagrx[-_].*.html','vibramycin[-_].*.html','vigora[-_].*.html','viracept[-_].*.html','viramune[-_].*.html','volmax[-_].*.html','voltaren[-_].*.html','voltarol[-_].*.html','voveran[-_].*.html','vytorin[-_].*.html','warfarin[-_].*.html','wellbutrin[-_].*.html','wondersleep[-_].*.html','xalatan[-_].*.html','xeloda[-_].*.html','xenical[-_].*.html','xylocaine[-_].*.html','yagara[-_].*.html','yasmin[-_].*.html','zaditor[-_].*.html','zagam[-_].*.html','zanaflex[-_].*.html','zantac[-_].*.html','zebeta[-_].*.html','zelnorm[-_].*.html','zenegra[-_].*.html','zerit[-_].*.html','zestoretic[-_].*.html','zestril[-_].*.html','zetia[-_].*.html','ziac[-_].*.html','ziagen[-_].*.html','zidovudine[-_].*.html','ziprasidone[-_].*.html','zithromax[-_].*.html','zocor[-_].*.html','zofran[-_].*.html','zovirax[-_].*.html','zyban[-_].*.html','zyloprim[-_].*.html','zyprexa[-_].*.html','zyrtec[-_].*.html','zyvox[-_].*.html');
$flatPatterns = implode('|', $patterns);



$filelist = array();
foreach ($directories as $directory) {
$files=ftp_nlist($conn_id, $directory);
foreach($files as $file) {
        preg_match('/'.$flatPatterns.'/i', $file, $matches);
                if($matches) {
                        $filelist[]=$directory."/".$file;
                }
        }
}
// try to delete $file
$i=0;
$count=count($filelist);
foreach($filelist as $filetodelete) {
        $i++;
        if (ftp_delete($conn_id, $filetodelete)) {
                echo "$filetodelete deleted successful - file $i out of $count\n";
        } else {
                 echo "could not delete $filetodelete\n";
        }
}



//testing section


// close the connection
ftp_close($conn_id);
?>
